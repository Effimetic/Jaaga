{% extends "base.html" %}

{% block title %}My Boats - Nashath Booking{% endblock %}

{% block content %}
<!-- Mobile App Style Boats Page -->
<div class="mobile-app-container">
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-content">
      <h4 class="page-title">
        <i class="fas fa-ship me-2"></i>My Boats
      </h4>
      <p class="page-subtitle">Manage your boat fleet</p>
    </div>
    <a href="{{ url_for('boat_management.add_boat') }}" class="add-btn">
      <i class="fas fa-plus"></i>
    </a>
  </div>

  <!-- Stats Summary -->
  <div class="stats-summary">
    <div class="stat-item">
      <div class="stat-number">{{ boats|length }}</div>
      <div class="stat-label">Total Boats</div>
    </div>
    <div class="stat-item">
      <div class="stat-number">{{ boats|selectattr('is_active')|list|length }}</div>
      <div class="stat-label">Active</div>
    </div>
    <div class="stat-item">
      <div class="stat-number">{{ boats|rejectattr('is_active')|list|length }}</div>
      <div class="stat-label">Inactive</div>
    </div>
  </div>

  {% if boats %}
    <!-- Boats List -->
    <div class="boats-list">
      {% for boat in boats %}
        <div class="boat-card">
          <div class="boat-header">
            <div class="boat-info">
              <h5 class="boat-name">{{ boat.name }}</h5>
              <div class="boat-meta">
                <span class="boat-seats">
                  <i class="fas fa-chair me-1"></i>
                  {% if boat.seating_type == 'total' %}
                    {{ boat.total_seats }} seats
                  {% else %}
                    Chart-based
                  {% endif %}
                </span>
                <span class="boat-date">
                  <i class="fas fa-calendar me-1"></i>
                  {{ boat.created_at.strftime('%b %Y') }}
                </span>
              </div>
            </div>
            <div class="boat-status">
              <span class="status-badge {% if boat.is_active %}active{% else %}inactive{% endif %}">
                {% if boat.is_active %}Active{% else %}Inactive{% endif %}
              </span>
            </div>
          </div>
          
          <div class="boat-actions">
            <a href="{{ url_for('boat_management.view_boat', boat_id=boat.id) }}" class="action-btn primary">
              <i class="fas fa-eye"></i>
              <span>View</span>
            </a>
            <a href="{{ url_for('boat_management.edit_boat', boat_id=boat.id) }}" class="action-btn secondary">
              <i class="fas fa-edit"></i>
              <span>Edit</span>
            </a>
            <button class="action-btn danger" onclick="deleteBoat({{ boat.id }}, '{{ boat.name }}')">
              <i class="fas fa-trash"></i>
              <span>Delete</span>
            </button>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <!-- Empty State -->
    <div class="empty-state">
      <div class="empty-icon">
        <i class="fas fa-ship"></i>
      </div>
      <h5 class="empty-title">No Boats Yet</h5>
      <p class="empty-description">You haven't added any boats yet. Start by adding your first boat to your fleet!</p>
      <a href="{{ url_for('boat_management.add_boat') }}" class="empty-action-btn">
        <i class="fas fa-plus me-2"></i>Add Your First Boat
      </a>
    </div>
  {% endif %}
</div>

<style>
  .mobile-app-container {
    max-width: 600px;
    margin: 0 auto;
    padding: 1rem;
  }

  .page-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1.5rem;
    padding: 1rem;
    background: white;
    border-radius: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    border: 1px solid #e9ecef;
  }

  .header-content {
    flex: 1;
  }

  .page-title {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 600;
    color: #212529;
  }

  .page-subtitle {
    margin: 0.25rem 0 0 0;
    font-size: 0.875rem;
    color: #6c757d;
  }

  .add-btn {
    width: 45px;
    height: 45px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    text-decoration: none;
    font-size: 1.125rem;
    transition: transform 0.2s ease;
  }

  .add-btn:hover {
    transform: scale(1.05);
    color: white;
    text-decoration: none;
  }

  .stats-summary {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.75rem;
    margin-bottom: 1.5rem;
  }

  .stat-item {
    background: white;
    border-radius: 12px;
    padding: 1rem;
    text-align: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    border: 1px solid #e9ecef;
  }

  .stat-number {
    font-size: 1.5rem;
    font-weight: 700;
    color: #212529;
    line-height: 1;
  }

  .stat-label {
    font-size: 0.75rem;
    color: #6c757d;
    margin-top: 0.25rem;
    font-weight: 500;
  }

  .boats-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .boat-card {
    background: white;
    border-radius: 16px;
    padding: 1.25rem;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    border: 1px solid #e9ecef;
    transition: transform 0.2s ease;
  }

  .boat-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.15);
  }

  .boat-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    margin-bottom: 1rem;
  }

  .boat-info {
    flex: 1;
  }

  .boat-name {
    margin: 0 0 0.5rem 0;
    font-size: 1.125rem;
    font-weight: 600;
    color: #212529;
  }

  .boat-meta {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .boat-seats, .boat-date {
    font-size: 0.875rem;
    color: #6c757d;
  }

  .boat-status {
    margin-left: 1rem;
  }

  .status-badge {
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .status-badge.active {
    background: #d1e7dd;
    color: #0f5132;
  }

  .status-badge.inactive {
    background: #f8d7da;
    color: #721c24;
  }

  .boat-actions {
    display: flex;
    gap: 0.5rem;
  }

  .action-btn {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem;
    border-radius: 10px;
    text-decoration: none;
    font-size: 0.875rem;
    font-weight: 500;
    border: none;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .action-btn.primary {
    background: #e7f3ff;
    color: #0d6efd;
  }

  .action-btn.primary:hover {
    background: #d1e7ff;
    color: #0d6efd;
    text-decoration: none;
  }

  .action-btn.secondary {
    background: #f8f9fa;
    color: #6c757d;
  }

  .action-btn.secondary:hover {
    background: #e9ecef;
    color: #6c757d;
    text-decoration: none;
  }

  .action-btn.danger {
    background: #f8d7da;
    color: #dc3545;
  }

  .action-btn.danger:hover {
    background: #f1aeb5;
    color: #dc3545;
  }

  .empty-state {
    text-align: center;
    padding: 3rem 1rem;
  }

  .empty-icon {
    font-size: 4rem;
    color: #dee2e6;
    margin-bottom: 1rem;
  }

  .empty-title {
    margin: 0 0 0.5rem 0;
    font-size: 1.25rem;
    font-weight: 600;
    color: #495057;
  }

  .empty-description {
    margin: 0 0 1.5rem 0;
    color: #6c757d;
    font-size: 0.875rem;
    line-height: 1.5;
  }

  .empty-action-btn {
    display: inline-flex;
    align-items: center;
    padding: 0.75rem 1.5rem;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    text-decoration: none;
    border-radius: 12px;
    font-weight: 500;
    transition: transform 0.2s ease;
  }

  .empty-action-btn:hover {
    transform: translateY(-2px);
    color: white;
    text-decoration: none;
  }

  @media (min-width: 768px) {
    .mobile-app-container {
      max-width: 800px;
    }
    
    .stats-summary {
      grid-template-columns: repeat(3, 1fr);
    }
    
    .boat-meta {
      flex-direction: row;
      gap: 1rem;
    }
  }

  @media (max-width: 480px) {
    .stats-summary {
      grid-template-columns: 1fr;
      gap: 0.5rem;
    }
    
    .boat-actions {
      flex-direction: column;
    }
    
    .action-btn {
      padding: 0.5rem;
    }
  }
</style>
{% endblock %}

{% block scripts %}
<script>
function deleteBoat(boatId, boatName) {
    if (confirm('Are you sure you want to delete "' + boatName + '"? This action cannot be undone.')) {
        fetch('/boats/boats/' + boatId + '/delete', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.message) {
                showAlert(data.message, 'success');
                setTimeout(() => {
                    location.reload();
                }, 1500);
            } else {
                showAlert(data.error || 'Failed to delete boat', 'danger');
            }
        })
        .catch(error => {
            showAlert('Network error. Please try again.', 'danger');
        });
    }
}
</script>
{% endblock %} 